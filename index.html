
<script src="unapp/js/jquery.min.js"></script>

<link rel="stylesheet" href="bootstrap-4.4.1-dist/css/bootstrap.min.css" >
<link rel="stylesheet" href="bootstrap-datetimepicker.css">

<!-- <script src="https://code.jquery.com/jquery-3.2.1.js"></script> -->

<script src="moment.js"></script>
<script src="bootstrap-4.4.1-dist/js/bootstrap.js"></script>
<script src="bootstrap-datetimepicker.js"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>

<!doctype html>
<html lang="en">
    <head>

        <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,300,400" rel="stylesheet">
        
        <!-- Animate.css -->
        <link rel="stylesheet" href="unapp/css/animate.css">
        <!-- Icomoon Icon Fonts-->
        <link rel="stylesheet" href="unapp/css/icomoon.css">
        <!-- Bootstrap  -->
        <link rel="stylesheet" href="unapp/css/bootstrap.css">
    
        <!-- Magnific Popup -->
        <link rel="stylesheet" href="unapp/css/magnific-popup.css">
    
        <!-- Owl Carousel -->
        <link rel="stylesheet" href="unapp/css/owl.carousel.min.css">
        <link rel="stylesheet" href="unapp/css/owl.theme.default.min.css">
    
        <!-- Theme style  -->
        <link rel="stylesheet" href="unapp/css/style.css">
    
        <!-- Modernizr JS -->
        <script src="unapp/js/modernizr-2.6.2.min.js"></script>


        <meta charset="utf-8">
            <meta
                name="viewport"
                content="width=device-width, initial-scale=1, shrink-to-fit=no">
                <title>드래그앤드롭 테스트</title>

                <style>
                    #sortable { 
                        list-style-type: none;
                        margin: 20px;
                        padding: 0;
                    }

                    #sortable li {
                        border: 1px solid #ddd;
                        padding: 20px;
                        margin-bottom: -1px;
                    }
                </style>

                    
                    <script src="https://kit.fontawesome.com/f76905eca5.js" crossorigin="anonymous"></script>
                    </head>
                <body>

                        <div class="container" style="margin-left:10px; margin-top:40px;float:left; height:100%; width:60%;  overflow-y:auto;">

                                <div class="container" id="mainContainer"></div>

                        <!-- /.container -->
                        </div>

                        <div class="propertyContainer" id="propertyContainer" style="height:100%; width:30%;  margin-top:40px;margin-left:-20px;float:left;  overflow-y:visible;">

                            <div class="property" id="property" align="center">
                                <table class="propertyTable" id="propertyTable">
                                    <tbody style="border:3px solid #808080;">
                                    <tr><td>******************************************</td></tr>
                                    <tr><td>***&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;***</td></tr>

                                        <tr>
                                            <td>***&emsp; 수정하고 싶은 배너를 선택해주세요&emsp;&nbsp;&nbsp;&nbsp;&nbsp;***</td>
                                        </tr>
                                    <tr><td>***&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;***</td></tr>

                                    <tr><td>******************************************</td></tr>

                                    </tbody>
                                </table>
                                
                                
                            </div>

                            <div class="jsonBox" id="jsonBox" style="margin-top:20px ; overflow-y:hidden;" align="center">
                                <table class="jsonTable" id="jsonTable" width=324 height=70>
                                    <tbody style="border:3px solid #808080;">
                                        <tr><td>
                                        <font size=1>
                                        <div class="jsonContent" id="jsonContent" style="margin-top:10px; margin-left:7px; overflow-y:auto; height:750px;"></div>
                                        </font>
                                        </td></tr>


                                    </tbody>
                                
                                </table>
                            
                            </div>
                        
                        
                        </div>


                        <div class="menuContainer" id="menuContainer" align=center style="height:100%; width:10%; float:left; margin-left:-80px;margin-top:60px">
                            
                            <div id="button1">

                                <button id="saveTestServerButton" style="width:150px;">테섭 DB 저장</button>

                            </div>
                            
                            <div id="button2" style="margin-top:15px;">

                                <button id="loadTestServerButton" style="width:150px;">테섭 DB 로드</button>

                            </div>
                            
                            
                            <div id="button3" style="margin-top:15px;">

                                <button id="saveLiveServerButton" style="width:150px;">본섭 DB 저장</button>

                            </div>
                            
                            <div id="button4" style="margin-top:15px;">

                                <button id="loadLiveServerButton" style="width:150px;">본섭 DB 로드</button>

                            </div>
                            
                            <div id="button5" style="margin-top:15px;">

                                <button id="refreshButton" style="width:150px;">새로고침</button>

                            </div>
                        </div>
                    

                        <script type="text/javascript">
                            $('#saveTestServerButton').click(function(){
                                var con = confirm('정말로 테섭 DB에 저장하시겠습니까?');

                                if(con === true){
                                    if(validationJsonData(jsonData)){
                                        alert('검증 성공');
                                    } else {
                                        alert('검증 실패');
                                    }
                                }
                            });

                            $('#loadTestServerButton').click(function(){
                                var con = confirm('정말로 테섭 DB를 불러오시겠습니까?');

                                if(con === true){
                                    window.location.reload();
                                }
                            });

                            $('#saveLiveServerButton').click(function(){
                                var con = prompt('정말로 본섭 DB에 저장하시겠습니까?\n(실수 방지를 위해 "flysher"를 입력하고 확인을 눌러주세요)');

                                if(con === 'flysher'){
                                    window.location.reload();
                                } else {
                                    alert('확인 메세지가 잘못되었습니다.');
                                }
                            });

                            $('#loadLiveServerButton').click(function(){
                                var con = prompt('정말로 본섭 DB를 불러오시겠습니까?\n(실수 방지를 위해 "flysher"를 입력하고 확인을 눌러주세요)');

                                if(con === 'flysher'){
                                    window.location.reload();
                                } else {
                                    alert('확인 메세지가 잘못되었습니다.');
                                }
                            });

                            $('#refreshButton').click(function(){
                                var con = confirm('정말로 새로고침을 하시겠습니까?');

                                if(con === true){
                                    window.location.reload();
                                }
                            });
                        </script>

                    </body>

                </html>
                <script type="text/javascript" src="functions.js"></script>
                <script type="text/javascript">
                    var jsonData = {
                        "AOS": [
                            {
                                "startTime": "2020-05-05 00:00:00",
                                "endTime": "2020-05-14 00:00:00",
                                "slotSequence": [
                                    [
                                        "System", 0, "play"
                                    ],
                                    [
                                        "Half", 0, "play"
                                    ],
                                    [
                                        "Pass", 0, "play"
                                    ],
                                    [
                                        "Slot02", 106, "play"
                                    ],
                                    [
                                        "Slot01", 103, "play"
                                    ],
                                    [
                                        "Adeal", 0, "play"
                                    ],
                                    [
                                        "FB", 0, "play"
                                    ]
                                ]
                            }, {
                                "startTime": "2020-05-14 00:00:01",
                                "endTime": "2020-05-24 00:00:00",
                                "slotSequence": [
                                    [
                                        "System", 0, "play"
                                    ],
                                    [
                                        "Half", 0, "play"
                                    ],
                                    [
                                        "Pass", 0, "play"
                                    ],
                                    [
                                        "Slot02", 106, "play"
                                    ],
                                    [
                                        "Slot01", 103, "play"
                                    ],
                                    [
                                        "Slot03", 109, "coming"
                                    ],
                                    [
                                        "Adeal", 0, "play"
                                    ],
                                    [
                                        "FB", 0, "play"
                                    ]
                                ]
                            }
                        ],
                        "IOS": [
                            {
                                "startTime": "2020-05-05 00:00:00",
                                "endTime": "2020-05-14 00:00:00",
                                "slotSequence": [
                                    [
                                        "System", 0, "play"
                                    ],
                                    [
                                        "Half", 0, "play"
                                    ],
                                    [
                                        "Pass", 0, "play"
                                    ],
                                    [
                                        "Slot02", 106, "play"
                                    ],
                                    [
                                        "Slot01", 103, "play"
                                    ],
                                    [
                                        "Adeal", 0, "play"
                                    ],
                                    [
                                        "FB", 0, "play"
                                    ]
                                ]
                            }, {
                                "startTime": "2020-05-14 00:00:01",
                                "endTime": "2020-05-24 00:00:00",
                                "slotSequence": [
                                    [
                                        "System", 0, "play"
                                    ],
                                    [
                                        "Half", 0, "play"
                                    ],
                                    [
                                        "Pass", 0, "play"
                                    ],
                                    [
                                        "Slot02", 106, "play"
                                    ],
                                    [
                                        "Slot01", 103, "play"
                                    ],
                                    [
                                        "Slot03", 109, "coming"
                                    ],
                                    [
                                        "Adeal", 0, "play"
                                    ],
                                    [
                                        "FB", 0, "play"
                                    ]
                                ]
                            }
                        ],
                        "WEB": [
                            {
                                "startTime": "2020-05-05 00:00:00",
                                "endTime": "2020-05-14 00:00:00",
                                "slotSequence": [
                                    [
                                        "Half", 0, "play"
                                    ],
                                    [
                                        "Slot02", 106, "play"
                                    ],
                                    [
                                        "Slot01", 103, "play"
                                    ],
                                    [
                                        "Pass", 0, "play"
                                    ],
                                    [
                                        "Mobile", 0, "play"
                                    ]
                                ]
                            }, {
                                "startTime": "2020-05-14 00:00:01",
                                "endTime": "2020-05-24 00:00:00",
                                "slotSequence": [
                                    [
                                        "Half", 0, "play"
                                    ],
                                    [
                                        "Slot02", 106, "play"
                                    ],
                                    [
                                        "Slot01", 103, "play"
                                    ],
                                    [
                                        "Pass", 0, "play"
                                    ],
                                    [
                                        "Slot03", 109, "coming"
                                    ],
                                    [
                                        "Mobile", 0, "play"
                                    ]
                                ]
                            }
                        ]
                    };

                    var clickedNode = null;
                    
                    document.getElementById("mainContainer").innerHTML = processJson(jsonData);

                    setJsonContent(parseHTML());
                    
                    $('.sortableTable').sortable({
                        // start: function(event, ui) {
                        //     var start_pos = ui.item.index();
                        //     ui.item.data('start_pos', start_pos);
                        // },
                        // change: function(event, ui) {
                        //     var start_pos = ui.item.data('start_pos');
                        //     var index = ui.placeholder.index();
                        //     ui.item.data('end_pos',index);
                            
                        // },
                        // update: function(event, ui) {
                        //     var parent = event.target.parentNode;

                        //     var parent_1 = parent.parentNode.parentNode;
                        //     var parent_2 = parent.parentNode.parentNode.parentNode;

                        //     var parent_3 = parent_2.parentNode;
                        //     var parent_4 = parent_3.parentNode;

                        //     var parent_5 = parent_4.parentNode;                            

                        //     var index2 = Array.prototype.indexOf.call(parent_2.childNodes, parent_1);

                        //     var index1 = Array.prototype.indexOf.call(parent_5.childNodes, parent_4);
                        //     lastChanged = [index1, index2, ui.item.data('start_pos'), ui.item.data('end_pos')];
                        // }
                    });
                    

                    
                    
                    
                </script>